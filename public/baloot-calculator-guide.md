# دليل حاسبة البلوت الشامل
# Baloot Score Calculator - Complete Guide

---

## نظرة عامة | Overview

تطبيق حاسبة بلوت بواجهة عربية كاملة (RTL) لحساب نقاط لعبة البلوت السعودية.
A Baloot Score Calculator with full Arabic (RTL) interface for tracking Saudi Baloot game scores.

- **أسماء الفرق الافتراضية**: "لنا" (Us) و "لهم" (Them)
- **نقاط الفوز**: 152 نقطة

---

## الصفحات والأوضاع | Pages & Modes

### 1. شاشة الاختيار (الرئيسية) | Game Setup (Home)
الصفحة الرئيسية للاختيار بين:
- **الحاسبة المختصرة (Simple)**: إدخال سريع للنقاط مع خانات كبيرة
- **الحاسبة المتقدمة (Advanced)**: تتبع كامل للعبة مع المشاريع والمضاعفات

### 2. لوحة اللعبة (المتقدمة) | Game Dashboard
واجهة اللعبة الكاملة تشمل:
- **ScoreBoard**: عرض النتيجة الحالية
- **AddRound**: إضافة صكة جديدة
- **RoundHistory**: سجل الصكات
- **WinnerModal**: نافذة إعلان الفائز
- **MatchHistory**: سجل المباريات السابقة

### 3. رأس الصفحة | Header
يحتوي على:
- زر الرئيسية (Home)
- صكة جديدة (New Game) - مع تأكيد
- كتم الصوت (Mute)
- السجل (History)
- الإعدادات (Settings)
- تبديل الوضع (Mode Switch)

---

## أنواع اللعب | Game Types

| النوع | إجمالي النقاط | الوصف |
|-------|--------------|-------|
| **صن (Sun)** | 130 نقطة | بدون ورقة حاكمة |
| **حكم (Hokm/Trump)** | 162 نقطة | مع ورقة حاكمة |

---

## قيم الأوراق | Card Values

### في الصن (Sun)
| الورقة | القيمة |
|--------|--------|
| الإكة (Ace) | 11 |
| العشرة (10) | 10 |
| الشايب (King) | 4 |
| البنت (Queen) | 3 |
| الولد (Jack) | 2 |
| التسعة (9) | 0 |
| الثمانية (8) | 0 |
| السبعة (7) | 0 |

### في الحكم (Trump Suit Only)
| الورقة | القيمة |
|--------|--------|
| الولد (Jack) | 20 |
| التسعة (9) | 14 |
| الإكة (Ace) | 11 |
| العشرة (10) | 10 |
| الشايب (King) | 4 |
| البنت (Queen) | 3 |
| الثمانية (8) | 0 |
| السبعة (7) | 0 |

---

## المشاريع | Projects

### قيم المشاريع
| المشروع | الصن (Sun) | الحكم (Hokm) | الحد الأقصى |
|---------|-----------|-------------|-------------|
| سرا (Sira/Sequence of 3) | 20 | 20 | 4 |
| خمسين (50/Sequence of 4) | 50 | 50 | 4 |
| مية (100/Sequence of 5+) | 100 | 100 | 2 |
| أربعمية (400/Four of a kind) | 200 | — | 1 |
| بلوت (Baloot/K+Q of trump) | 20 | 20 | 1 |

### قواعد اختيار المشاريع
- النقر المتكرر للتدوير بين (0, 1, 2, 3, 4)
- البلوت في الحكم مشروع مستقل يمكن تخصيصه لفريق مختلف
- في الكبوت، جميع المشاريع تذهب لفريق الكبوت

---

## حساب نقاط الصن | Sun Scoring Logic

1. **قيم المشاريع الخام**:
   - سرا = 20، خمسين = 50، مية = 100، أربعمية = 200

2. **إجمالي النقاط الخام** = (130 + مجموع المشاريع الخام) × 2

3. **نقاط الفريق الخام** = (نقاط الأوراق + نقاط المشاريع) × 2

4. **نجاح المشتري**: إذا كانت نقاطه الخام ≥ نصف الإجمالي

5. **النقاط النهائية** = النقاط الخام ÷ 10

---

## حساب نقاط الحكم | Hokm Scoring Logic

1. **إجمالي النقاط الأساسي**: 162 نقطة

2. **نقاط المشاريع**: تُعامل كنقاط خام وتُقارن بـ 162

3. **نجاح المشتري**: إذا حصل على أكثر من نصف النقاط

### قاعدة 86/76 الخاصة
في الحكم العادي (بدون مضاعف):
- إذا كان المشتري لديه 86 نقطة خام والخصم 76
- النتيجة النهائية: 9 للمشتري و 7 للخصم
- (المجموع 16 بدلاً من 17)

---

## المضاعفات | Multipliers (Hokm Only)

| المضاعف | التأثير |
|---------|--------|
| عادي (Normal) | ×1 |
| دبل (Double) | ×2 |
| ×3 | ثلاثة أضعاف |
| ×4 | أربعة أضعاف |
| قهوة (Qahwa) | فوز فوري 152-0 |

### قواعد المضاعفات
- عند أي مضاعف > ×1، الفائز يأخذ كل النقاط
- **استثناء**: البلوت دائماً يذهب للفريق الذي حصل عليه
- النقر على مضاعف نشط يلغيه ويعود لـ "عادي"

---

## الكبوت | Kaboot (Capot)

يحدث عندما لا يأخذ فريق أي "أكلة" في الصكة.

| نوع اللعب | النقاط الثابتة |
|----------|---------------|
| حكم (Hokm) | 25 نقطة |
| صن (Sun) | 44 نقطة |

### قواعد الكبوت
- جميع المشاريع تُخصص تلقائياً لفريق الكبوت
- اختيار مشاريع الخصم يُعطّل
- يمكن إضافة البلوت لفريق الكبوت في الحكم

---

## قاعدة "بدون أبناط" | Without Points Rule

تحدد نجاح المشتري في صكات الحكم العادية.

### عند التفعيل:
إذا كان رقم الآحاد في مجموع نقاط المشتري الخام (نقاط الأوراق + المشاريع × 10) هو:
**6، 7، 8، 9، أو 0**

→ يتم نقل 5 نقاط من إجمالي الخصم إلى المشتري قبل فحص النجاح (50%)

---

## أوضاع مضاعفة المشاريع | Project Multiplier Modes

| الوضع | الوصف |
|-------|-------|
| **الكل ×2** (افتراضي) | جميع المشاريع (سرا، 50، 100) محددة بـ ×2 |
| **المية بس ×2** | فقط المية محددة بـ ×2 |
| **مع الـ ×3 أو الـ ×4** | المشاريع تتبع المضاعف الكامل |

---

## الإعدادات | Settings

### حسبة الحكم
- **بالأبناط** (افتراضي): يتطلب التعادل للنجاح
- **بدون أبناط**: يشمل أمثلة محددة مثل قاعدة 76/8

### حسبة المشاريع في الثري والفور
- الكل ×2 (افتراضي)
- المية بس ×2
- مع الـ ×3 أو الـ ×4

### المظهر
- داكن (Dark)
- فاتح (Light)
- تلقائي (Auto)

---

## الإعلانات الصوتية | Voice Announcements

- إعلان النتائج بالعربية بعد كل صكة
- استخدام Web Speech API (ويب) أو expo-speech (موبايل)
- سرعة النطق: 1.2
- إعلان النتائج، الفائزين، وأحداث الكبوت
- تبديل عبر زر كتم/إلغاء كتم الصوت

---

## الحاسبة المختصرة | Simple Calculator

- خانات إدخال كبيرة (w-28)
- سهم دوار مركزي (h-12 w-12)
- انتقال تلقائي للخانة الأخرى بعد إدخال رقمين
- زر "صكة جديدة" مع تأكيد
- سجل اللعبة بتخطيط CSS Grid
- مزامنة الحالة عبر GameContext

---

## واجهة إضافة الصكة | Add Round Interface

- **صن** على اليمين و **حكم** على اليسار
- **المشترى** فوق **الأبناط** مباشرة
- أزرار التبديل بتدرجات وظلال
- في الصن: اختيار الدبل بعرض كامل
- أزرار المشاريع واختيار الفريق بارتفاع متساوٍ (h-12)
- المعاينة تعرض نقاط الصكة الحالية فقط مع بادئة '+'

---

## نافذة الكبوت | Kaboot Popup

- تخطيط عمودي مع أزرار rounded-xl
- في الحكم: يمكن تبديل البلوت لفريق الكبوت
- اختيار صن/حكم والفرق بنظام الرمادي
- جميع النوافذ المنبثقة بزوايا rounded-2xl

---

## سجل المباريات | Match History

- حفظ في جدول Supabase (public.games)
- يشمل: أسماء الفرق، النتائج النهائية، تفاصيل الصكات (JSONB)
- وصول عام عبر سياسات RLS

---

## المتطلبات التقنية | Technical Stack

- **Frontend**: React, Vite, TypeScript
- **Styling**: Tailwind CSS
- **Backend**: Supabase (Lovable Cloud)
- **Mobile**: Capacitor (iOS/Android)
- **State Management**: React Context
- **UI Components**: shadcn/ui

---

## ملاحظات إضافية | Additional Notes

- الأرض (Ground) يجب تضمينها في إدخال النقاط اليدوي
- إدخال نقاط فريق واحد يوازن تلقائياً نقاط الفريق الآخر
- نقاط الفوز الثابتة: 152 نقطة
- دعم RTL كامل في الواجهة

---

**آخر تحديث**: يناير 2026
